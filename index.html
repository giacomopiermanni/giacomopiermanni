<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Giacomo Piermanni – Portfolio</title>
  <style>
    :root { --bg:#0f0f0f; --fg:#e8e8e8; --muted:#aaaaaa; --accent:#ffffff; }
    * { box-sizing: border-box; }
    html, body { margin:0; background:var(--bg); color:var(--fg); font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; }
    header { padding: 32px 20px; text-align:center; }
    header h1 { margin:0 0 6px; font-size: 28px; letter-spacing:.5px; }
    header p { margin:0; color:var(--muted); }

    .container { max-width: 1100px; margin: 0 auto; padding: 0 16px 60px; }

    /* Lista progetti */
    .project { border-top: 1px solid #202020; }
    .project:last-child { border-bottom: 1px solid #202020; }
    .project__btn {
      width: 100%; text-align: left; background: transparent; color: var(--fg);
      border: none; padding: 18px 6px; font-size: 18px; cursor: pointer; display:flex; justify-content:space-between; align-items:center;
    }
    .project__btn:hover { color: var(--accent); }
    .chev { transition: transform .2s ease; }
    .project.open .chev { transform: rotate(90deg); }

    /* Galleria */
    .gallery { display: none; padding: 10px 0 24px; }
    .project.open .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 10px; }

    .gallery img {
      width: 100%; height: auto; display:block; border-radius: 6px; background:#1b1b1b;
      transition: transform .12s ease;
    }
    .gallery img:hover { transform: scale(1.01); }

    /* Lightbox */
    .lightbox {
      position: fixed; inset:0; background: rgba(0,0,0,.92);
      display:none; align-items:center; justify-content:center; padding:20px; z-index: 9999;
    }
    .lightbox.open { display:flex; }
    .lightbox img { max-width: 95vw; max-height: 90vh; border-radius: 8px; }
    .lightbox .close { position: fixed; top:16px; right:20px; color:#ddd; font-size:28px; cursor:pointer; }
  </style>
</head>
<body>
  <header>
    <h1>Giacomo Piermanni</h1>
    <p>Portfolio fotografico</p>
  </header>

  <main class="container" id="projects">
    <!-- PROGETTO: Valle d'Aosta -->
    <!-- DOPO AVER CARICATO LE FOTO IN img/ValleDAosta, METTI QUI I LORO NOMI SEPARATI DA VIRGOLE -->
    <section class="project" data-name="Valle d'Aosta" data-path="img/ValleDAosta" data-files="05.jpg,06.jpg,07.jpg,08.jpg,09.jpg,10.jpg,11.jpg,12.jpg,13.jpg,14.jpg,15.jpg,16.jpg,17.jpg,18.jpg">
      <button class="project__btn">
        <span>Valle d'Aosta</span>
        <span class="chev">›</span>
      </button>
      <div class="gallery"></div>
    </section>
  </main>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox">
    <span class="close" id="lbClose">×</span>
    <img id="lbImg" alt="">
  </div>

  <footer style="text-align:center; color:#888; font-size:13px; padding:24px 0 40px;">
    © <span id="year"></span> Giacomo Piermanni – Tutti i diritti riservati
  </footer>

  <script>
    // anno footer
    document.getElementById('year').textContent = new Date().getFullYear();

    // apre/chiude progetto e carica immagini la prima volta
    document.querySelectorAll('.project').forEach(section => {
      const btn = section.querySelector('.project__btn');
      const gal = section.querySelector('.gallery');
      let loaded = false;

      btn.addEventListener('click', () => {
        section.classList.toggle('open');

        if (!loaded) {
          const base = section.dataset.path; // es: img/ValleDAosta
          const files = section.dataset.files.split(',').map(s => s.trim()).filter(Boolean);
          files.forEach(f => {
            const img = new Image();
            img.loading = 'lazy';
            img.src = `${base}/${f}`;
            img.alt = `${section.dataset.name} – ${f}`;
            img.addEventListener('click', () => openLightbox(img.src, img.alt));
            gal.appendChild(img);
          });
          loaded = true;
        }
      });
    });

    // lightbox
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lbImg');
    const lbClose = document.getElementById('lbClose');

    function openLightbox(src, alt) { lbImg.src = src; lbImg.alt = alt; lb.classList.add('open'); }
    function closeLightbox() { lb.classList.remove('open'); lbImg.src=''; }
    lbClose.addEventListener('click', closeLightbox);
    lb.addEventListener('click', (e) => { if (e.target === lb) closeLightbox(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeLightbox(); });
  </script>
</body>
</html>
